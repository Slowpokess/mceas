# Журнал изменений MCEAS

Все значимые изменения проекта будут документироваться в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Добавлено
- Кроссплатформенная поддержка системных путей и директорий
- Полная поддержка браузеров Chrome, Firefox и Edge
- Чтение закладок, истории и расширений браузеров
- Поддержка SQLite для работы с данными браузеров
- Улучшенная реализация HTTP протокола с поддержкой сжатия данных (gzip)
- Механизм разбиения больших сообщений на части (chunking)
- Реализация повторных попыток с экспоненциальной задержкой для повышения надежности
- Улучшенная защита от анализа и обнаружения
- Реализация протоколов DoH (DNS over HTTPS) для безопасных DNS-запросов
- Встроенная регистрация протоколов через фабрику

### Изменено
- Переработана архитектура модуля браузеров на основе единого интерфейса
- Стандартизирована работа с уникальными указателями в модулях
- Улучшена обработка сетевых ошибок и таймаутов
- Реализовано маскирование под обычный браузерный трафик

### Исправлено
- Ошибки компиляции, связанные с неполными типами
- Проблемы включения заголовочных файлов в модуле браузеров
- Исправлены утечки памяти при работе с libcurl
- Повышена устойчивость к сетевым сбоям и нестабильному соединению

## [0.1.0] - 18.05.2015x

### Добавлено
- Базовая структура проекта
- Ядро агента: config, module_manager, updater
- Минимальная реализация модулей браузеров и криптокошельков
- Механизм логирования и обработки ошибок

## [0.1.1] 

# Модуль анализа браузеров

## Обзор

Модуль анализа браузеров позволяет обнаруживать установленные браузеры, собирать информацию о них, включая закладки, историю и установленные расширения.

## Архитектура

Модуль построен на основе интерфейса `BrowserAnalyzer`, который определяет общие методы для всех анализаторов браузеров:

```cpp
class BrowserAnalyzer {
public:
    virtual bool isInstalled() = 0;
    virtual BrowserType getType() = 0;
    virtual std::string getName() = 0;
    virtual std::string getVersion() = 0;
    virtual std::string getExecutablePath() = 0;
    virtual std::string getProfilePath() = 0;
    virtual std::map<std::string, std::string> collectData() = 0;
};

Для каждого поддерживаемого браузера реализован специализированный класс:

ChromeAnalyzer для Google Chrome
FirefoxAnalyzer для Mozilla Firefox
EdgeAnalyzer для Microsoft Edge

# Принцип работы

При инициализации BrowserModule создает экземпляры всех анализаторов
Метод detectBrowsers() проверяет, какие браузеры установлены
Метод onExecute() собирает данные со всех обнаруженных браузеров
Для каждого браузера вызывается метод collectData(), который возвращает данные

Собираемые данные

Основная информация: версия, путь к профилю, путь к исполняемому файлу
Закладки: заголовок, URL, дата добавления, папка
История: заголовок, URL, дата посещения, количество посещений
Расширения: ID, название, версия, описание, статус

Кроссплатформенность
Модуль использует platform_utils.h для обеспечения совместимости с:

Windows
macOS
Linux

Данные хранятся в разных форматах:

Chrome и Edge: JSON для закладок, SQLite для истории
Firefox: SQLite для закладок и истории
------------------------------


# Changelog

Все значимые изменения в проекте MCEAS будут документироваться в этом файле.

## [0.1.3] - 2025-05-21

### Добавлено
- Улучшенная реализация HTTP протокола с поддержкой сжатия данных (gzip)
- Механизм разбиения больших сообщений на части (chunking)
- Реализация повторных попыток с экспоненциальной задержкой
- Улучшена система безопасности коммуникаций
- Добавлена поддержка DoH (DNS over HTTPS) для безопасных DNS-запросов
- Реализована фабрика протоколов для удобной регистрации и создания экземпляров протоколов

### Изменено
- Улучшена обработка сетевых ошибок и таймаутов
- Добавлено маскирование под стандартный браузерный трафик
- Оптимизирована работа с памятью при передаче данных

### Исправлено
- Исправлены утечки памяти при работе с libcurl
- Повышена устойчивость к нестабильному соединению
- Улучшена обработка ошибок при передаче данных

## [0.1.2] - 2025-05-20

### Добавлено
- Создана базовая структура проекта
- Разработано ядро агента (Core)
- Разработаны модули анализа:
  - Модуль анализа браузеров (Browser Module)
  - Модуль анализа криптокошельков (Crypto Module)
  - Модуль файловой телеметрии (File Telemetry Module)
  - Модуль поведенческого аудита (Behavior Module)
- Реализована кроссплатформенная поддержка (Windows, macOS, Linux)
- Созданы общие утилиты для системных функций
- Разработана система логирования

### Изменено
- Оптимизирован процесс сборки для всех поддерживаемых платформ

### Исправлено
- Исправлены пути к заголовочным файлам
- Исправлены проблемы с обнаружением браузеров в macOS